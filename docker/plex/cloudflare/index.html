


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Selfhosters.net is a documentation portal for the Unraid Discord. Here you will find short guides and walkthroughs made by the  Unraid community.">
      
      
        <link rel="canonical" href="https://selfhosters.net/docker/plex/cloudflare/">
      
      
        <meta name="author" content="Selfhosters">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.2.3">
    
    
      
        <title>Routing Plex through Cloudflare - Selfhosters.net</title>
      
    
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6e35a1a6.min.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.a46bcfb3.min.css">
      
      
        
        
        <meta name="theme-color" content="#ffa726">
      
    
    <link rel="stylesheet" href="../../../css/lightgallery.min.css">

    
    
    <script src="../../../js/lightgallery.min.js"></script>

    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CFira+Code&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Fira Code",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="orange" data-md-color-accent="red">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#routing-plex-through-cloudflare" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://selfhosters.net" title="Selfhosters.net" class="md-header-nav__button md-logo" aria-label="Selfhosters.net">
      
  <img src="../../../assets/images/logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Selfhosters.net
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Routing Plex through Cloudflare
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/selfhosters/selfhosters.net/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    selfhosters/selfhosters.net
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://selfhosters.net" title="Selfhosters.net" class="md-nav__button md-logo" aria-label="Selfhosters.net">
      
  <img src="../../../assets/images/logo.png" alt="logo">

    </a>
    Selfhosters.net
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/selfhosters/selfhosters.net/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    selfhosters/selfhosters.net
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../commands/" title="Nice to know Unraid commands" class="md-nav__link">
      Nice to know Unraid commands
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Unraid Tips
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Unraid Tips" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Unraid Tips
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tips/discord_notifications/discord_notifications/" title="Adding Discord Notifications" class="md-nav__link">
      Adding Discord Notifications
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Docker
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Docker" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Telegraf
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Telegraf" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Telegraf
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../telegraf/ipmi/" title="Adding IPMI stats to the Telegraf container" class="md-nav__link">
      Adding IPMI stats to the Telegraf container
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2" checked>
    
    <label class="md-nav__link" for="nav-4-2">
      Plex
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Plex" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Plex
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Routing Plex through Cloudflare
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Routing Plex through Cloudflare" class="md-nav__link md-nav__link--active">
      Routing Plex through Cloudflare
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why" class="md-nav__link">
    Why
  </a>
  
    <nav class="md-nav" aria-label="Why">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reverse-proxy" class="md-nav__link">
    Reverse proxy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20200107-changelog-httpsgithubcomlinuxserverdocker-letsencryptcommitsmasterrootdefaultssslconf" class="md-nav__link">
    Version 2020/01/07 - Changelog: https://github.com/linuxserver/docker-letsencrypt/commits/master/root/defaults/ssl.conf
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      VPN
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="VPN" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        VPN
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../pfsense_vlan_vpn/pfsense_vlan_vpn/" title="Route a container trough a VPN with PfSense" class="md-nav__link">
      Route a container trough a VPN with PfSense
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../templating/templating/" title="Writing a template compatible for unraid" class="md-nav__link">
      Writing a template compatible for unraid
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why" class="md-nav__link">
    Why
  </a>
  
    <nav class="md-nav" aria-label="Why">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reverse-proxy" class="md-nav__link">
    Reverse proxy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20200107-changelog-httpsgithubcomlinuxserverdocker-letsencryptcommitsmasterrootdefaultssslconf" class="md-nav__link">
    Version 2020/01/07 - Changelog: https://github.com/linuxserver/docker-letsencrypt/commits/master/root/defaults/ssl.conf
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/selfhosters/selfhosters.net/edit/master/docs/docker/plex/cloudflare.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="routing-plex-through-cloudflare">Routing Plex through Cloudflare<a class="headerlink" href="#routing-plex-through-cloudflare" title="Permanent link">&para;</a></h1>
<h2 id="why">Why<a class="headerlink" href="#why" title="Permanent link">&para;</a></h2>
<p>Routing Plex through the <a href="https://www.cloudflare.com/learning/cdn/what-is-a-cdn/">Cloudflare CDN</a> can vastly improve your remote connection speeds to your server. Cloudflare acts as a middle man between your server and your different clients.</p>
<p>Many experience bad peering between server and client even though the server has a good upload speed. This is because the client sometimes has to hop through all sorts of hoops if it's on a different ISP network. This can increase latency and lowered connection speeds.</p>
<p>But by using Cloudflare as a middle man, both your server and the clients will (in most cases) have a great connection to Cloudflare.</p>
<p>This will speed up the start times and scrolling of your streams and the general stability of the connection.</p>
<div class="admonition error">
<p class="admonition-title">Update February 1, 2020</p>
<p>Cloudflare has updated their TOS with the following:</p>
<div class="admonition quote">
<p class="admonition-title">Cloudflare TOS 2.8</p>
<p>Use of the Service for serving video (unless purchased separately as a Paid Service) or a disproportionate percentage of pictures, audio files, or other non-HTML content, is prohibited.</p>
</div>
<p>It previously only mentioned cached content. So if you plan on doing this, I would recommend setting up a separate account and domain if you already use Cloudflare.</p>
</div>
<h3 id="reverse-proxy">Reverse proxy<a class="headerlink" href="#reverse-proxy" title="Permanent link">&para;</a></h3>
<p>To get this working you need to reverse proxy Plex. This guide won't go into detail on how to do this. But I highly recommend this guide as a starting point. <a href="https://blog.linuxserver.io/2019/04/25/letsencrypt-nginx-starter-guide/">Let's Encrypt, Nginx &amp; Reverse Proxy Starter Guide - 2019 Edition</a></p>
<p>The <a href="https://hub.docker.com/r/linuxserver/letsencrypt/">linuxserver/letsencrypt</a> container comes with premade nginx configs that you can use.
If you're stuck, just pop into the <mark>#reverse-proxy</mark> channel on our <a href="https://selfhosters.net/unraid">Discord</a> and someone will help you <img alt="🙂" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f642.svg" title=":slight_smile:" /></p>
<details class="example"><summary>Nginx subdomain example</summary><p>```nginx tab="plex.conf"
    server {
    listen 443 ssl;
    listen [::]:443 ssl;</p>
<div class="codehilite"><pre><span></span><code><span class="nt">server_name</span> <span class="nt">plex</span><span class="o">.*;</span>

<span class="nt">include</span> <span class="o">/</span><span class="nt">config</span><span class="o">/</span><span class="nt">nginx</span><span class="o">/</span><span class="nt">ssl</span><span class="p">.</span><span class="nc">conf</span><span class="o">;</span>

<span class="nt">client_max_body_size</span> <span class="nt">0</span><span class="o">;</span>
<span class="nt">proxy_redirect</span> <span class="nt">off</span><span class="o">;</span>
<span class="nt">proxy_buffering</span> <span class="nt">off</span><span class="o">;</span>

<span class="nt">location</span> <span class="o">/</span> <span class="p">{</span>
    <span class="err">include</span> <span class="err">/config/nginx/proxy.conf</span><span class="p">;</span>
    <span class="err">proxy_pass</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">HOSTIP</span><span class="o">:</span><span class="mi">32400</span><span class="o">/</span><span class="p">;</span>

    <span class="err">proxy_set_header</span> <span class="err">Upgrade</span> <span class="err">$http_upgrade</span><span class="p">;</span>
    <span class="err">proxy_set_header</span> <span class="err">Connection</span> <span class="err">&quot;upgrade&quot;</span><span class="p">;</span>

    <span class="err">proxy_set_header</span> <span class="err">X-Plex-Client-Identifier</span> <span class="err">$http_x_plex_client_identifier</span><span class="p">;</span>
    <span class="err">proxy_set_header</span> <span class="err">X-Plex-Device</span> <span class="err">$http_x_plex_device</span><span class="p">;</span>
    <span class="err">proxy_set_header</span> <span class="err">X-Plex-Device-Name</span> <span class="err">$http_x_plex_device_name</span><span class="p">;</span>
    <span class="err">proxy_set_header</span> <span class="err">X-Plex-Platform</span> <span class="err">$http_x_plex_platform</span><span class="p">;</span>
    <span class="err">proxy_set_header</span> <span class="err">X-Plex-Platform-Version</span> <span class="err">$http_x_plex_platform_version</span><span class="p">;</span>
    <span class="err">proxy_set_header</span> <span class="err">X-Plex-Product</span> <span class="err">$http_x_plex_product</span><span class="p">;</span>
    <span class="err">proxy_set_header</span> <span class="err">X-Plex-Token</span> <span class="err">$http_x_plex_token</span><span class="p">;</span>
    <span class="err">proxy_set_header</span> <span class="err">X-Plex-Version</span> <span class="err">$http_x_plex_version</span><span class="p">;</span>
    <span class="err">proxy_set_header</span> <span class="err">X-Plex-Nocache</span> <span class="err">$http_x_plex_nocache</span><span class="p">;</span>
    <span class="err">proxy_set_header</span> <span class="err">X-Plex-Provides</span> <span class="err">$http_x_plex_provides</span><span class="p">;</span>
    <span class="err">proxy_set_header</span> <span class="err">X-Plex-Device-Vendor</span> <span class="err">$http_x_plex_device_vendor</span><span class="p">;</span>
    <span class="err">proxy_set_header</span> <span class="err">X-Plex-Model</span> <span class="err">$http_x_plex_model</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>


<p>}
```</p>
<p>```nginx tab="ssl.conf"</p>
<h2 id="version-20200107-changelog-httpsgithubcomlinuxserverdocker-letsencryptcommitsmasterrootdefaultssslconf">Version 2020/01/07 - Changelog: <a href="https://github.com/linuxserver/docker-letsencrypt/commits/master/root/defaults/ssl.conf">https://github.com/linuxserver/docker-letsencrypt/commits/master/root/defaults/ssl.conf</a><a class="headerlink" href="#version-20200107-changelog-httpsgithubcomlinuxserverdocker-letsencryptcommitsmasterrootdefaultssslconf" title="Permanent link">&para;</a></h2>
<h1 id="session-settings">session settings<a class="headerlink" href="#session-settings" title="Permanent link">&para;</a></h1>
<p>ssl_session_timeout 1d;
ssl_session_cache shared:SSL:50m;
ssl_session_tickets off;</p>
<h1 id="diffie-hellman-parameter-for-dhe-cipher-suites">Diffie-Hellman parameter for DHE cipher suites<a class="headerlink" href="#diffie-hellman-parameter-for-dhe-cipher-suites" title="Permanent link">&para;</a></h1>
<p>ssl_dhparam /config/nginx/dhparams.pem;</p>
<h1 id="ssl-certs">ssl certs<a class="headerlink" href="#ssl-certs" title="Permanent link">&para;</a></h1>
<p>ssl_certificate /config/keys/letsencrypt/fullchain.pem;
ssl_certificate_key /config/keys/letsencrypt/privkey.pem;</p>
<h1 id="protocols">protocols<a class="headerlink" href="#protocols" title="Permanent link">&para;</a></h1>
<h1 id="using-generated-2020-01-07-httpsssl-configmozillaorgservernginxserver-version1161-r4configintermediateopenssl-version111d-r3">using generated 2020-01-07, <a href="https://ssl-config.mozilla.org/#server=nginx&amp;server-version=1.16.1-r4&amp;config=intermediate&amp;openssl-version=1.1.1d-r3">https://ssl-config.mozilla.org/#server=nginx&amp;server-version=1.16.1-r4&amp;config=intermediate&amp;openssl-version=1.1.1d-r3</a><a class="headerlink" href="#using-generated-2020-01-07-httpsssl-configmozillaorgservernginxserver-version1161-r4configintermediateopenssl-version111d-r3" title="Permanent link">&para;</a></h1>
<p>ssl_protocols TLSv1.2 TLSv1.3;
ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;
ssl_prefer_server_ciphers off;</p>
<h1 id="hsts-remove-from-the-line-below-to-enable-hsts">HSTS, remove # from the line below to enable HSTS<a class="headerlink" href="#hsts-remove-from-the-line-below-to-enable-hsts" title="Permanent link">&para;</a></h1>
<h1 id="add_header-strict-transport-security-max-age63072000-includesubdomains-preload-always">add_header Strict-Transport-Security "max-age=63072000; includeSubDomains; preload" always;<a class="headerlink" href="#add_header-strict-transport-security-max-age63072000-includesubdomains-preload-always" title="Permanent link">&para;</a></h1>
<h1 id="ocsp-stapling">OCSP Stapling<a class="headerlink" href="#ocsp-stapling" title="Permanent link">&para;</a></h1>
<p>ssl_stapling on;
ssl_stapling_verify on;
resolver 127.0.0.11 valid=30s; # Docker DNS Server</p>
<h1 id="enable-tls-13-early-data">Enable TLS 1.3 early data<a class="headerlink" href="#enable-tls-13-early-data" title="Permanent link">&para;</a></h1>
<p>ssl_early_data on;</p>
<h1 id="optional-additional-headers">Optional additional headers<a class="headerlink" href="#optional-additional-headers" title="Permanent link">&para;</a></h1>
<h1 id="add_header-content-security-policy-upgrade-insecure-requests">add_header Content-Security-Policy "upgrade-insecure-requests";<a class="headerlink" href="#add_header-content-security-policy-upgrade-insecure-requests" title="Permanent link">&para;</a></h1>
<h1 id="add_header-x-frame-options-sameorigin-always">add_header X-Frame-Options "SAMEORIGIN" always;<a class="headerlink" href="#add_header-x-frame-options-sameorigin-always" title="Permanent link">&para;</a></h1>
<h1 id="add_header-x-xss-protection-1-modeblock-always">add_header X-XSS-Protection "1; mode=block" always;<a class="headerlink" href="#add_header-x-xss-protection-1-modeblock-always" title="Permanent link">&para;</a></h1>
<h1 id="add_header-x-content-type-options-nosniff-always">add_header X-Content-Type-Options "nosniff" always;<a class="headerlink" href="#add_header-x-content-type-options-nosniff-always" title="Permanent link">&para;</a></h1>
<h1 id="add_header-x-ua-compatible-ieedge-always">add_header X-UA-Compatible "IE=Edge" always;<a class="headerlink" href="#add_header-x-ua-compatible-ieedge-always" title="Permanent link">&para;</a></h1>
<h1 id="add_header-cache-control-no-transform-always">add_header Cache-Control "no-transform" always;<a class="headerlink" href="#add_header-cache-control-no-transform-always" title="Permanent link">&para;</a></h1>
<h1 id="add_header-referrer-policy-same-origin-always">add_header Referrer-Policy "same-origin" always;<a class="headerlink" href="#add_header-referrer-policy-same-origin-always" title="Permanent link">&para;</a></h1>
<p>```</p>
<p>```nginx tab="proxy.conf"</p>
<h2 id="version-20191023-changelog-httpsgithubcomlinuxserverdocker-letsencryptcommitsmasterrootdefaultsproxyconf">Version 2019/10/23 - Changelog: <a href="https://github.com/linuxserver/docker-letsencrypt/commits/master/root/defaults/proxy.conf">https://github.com/linuxserver/docker-letsencrypt/commits/master/root/defaults/proxy.conf</a><a class="headerlink" href="#version-20191023-changelog-httpsgithubcomlinuxserverdocker-letsencryptcommitsmasterrootdefaultsproxyconf" title="Permanent link">&para;</a></h2>
<p>client_body_buffer_size 128k;</p>
<h1 id="timeout-if-the-real-server-is-dead">Timeout if the real server is dead<a class="headerlink" href="#timeout-if-the-real-server-is-dead" title="Permanent link">&para;</a></h1>
<p>proxy_next_upstream error timeout invalid_header http_500 http_502 http_503;</p>
<h1 id="advanced-proxy-config">Advanced Proxy Config<a class="headerlink" href="#advanced-proxy-config" title="Permanent link">&para;</a></h1>
<p>send_timeout 5m;
proxy_read_timeout 240;
proxy_send_timeout 240;
proxy_connect_timeout 240;</p>
<h1 id="tls-13-early-data">TLS 1.3 early data<a class="headerlink" href="#tls-13-early-data" title="Permanent link">&para;</a></h1>
<p>proxy_set_header Early-Data $ssl_early_data;</p>
<h1 id="basic-proxy-config">Basic Proxy Config<a class="headerlink" href="#basic-proxy-config" title="Permanent link">&para;</a></h1>
<p>proxy_set_header Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto https;
proxy_set_header X-Forwarded-Host $host;
proxy_set_header X-Forwarded-Ssl on;
proxy_redirect  http://  $scheme://;
proxy_http_version 1.1;
proxy_set_header Connection "";</p>
<h1 id="proxy_cookie_path-httponly-secure-enable-at-your-own-risk-may-break-certain-apps">proxy_cookie_path / "/; HTTPOnly; Secure"; # enable at your own risk, may break certain apps<a class="headerlink" href="#proxy_cookie_path-httponly-secure-enable-at-your-own-risk-may-break-certain-apps" title="Permanent link">&para;</a></h1>
<p>proxy_cache_bypass $cookie_session;
proxy_no_cache $cookie_session;
proxy_buffers 32 4k;
proxy_headers_hash_bucket_size 128;
proxy_headers_hash_max_size 1024;
```</p>
</details>
<h3 id="cloudflare">Cloudflare<a class="headerlink" href="#cloudflare" title="Permanent link">&para;</a></h3>
<p>If you haven't already you need to add your domain to Cloudflare for this to work. See this guide on how to do that: <a href="https://support.cloudflare.com/hc/en-us/articles/201720164-Creating-a-Cloudflare-account-and-adding-a-website">Creating a Cloudflare account and adding a website</a></p>
<p>In short you need to change your nameservers on your DNS provides page to the ones Cloudflare says.
This might take some time depending on the DNS provider. Last time I did it I was using Namecheap and it took less then 10 minutes to propagate, so have some patience.</p>
<p>After it's been transfered make sure the orange cloud is enabled. This is what activates the Cloudflare CDN on the domain.</p>
<p><div class="lightgallery"><a data-sub-html="cloud" href="../cloudflare_cloud.png"><img alt="cloud" src="../cloudflare_cloud.png" /></a></div></p>
<h4 id="cache-rules">Cache rules<a class="headerlink" href="#cache-rules" title="Permanent link">&para;</a></h4>
<p>This is very important that you do or else Cloudflare might ban your account for breaking the TOS on caching.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>See: <a href="https://www.cloudflare.com/terms/">2.8 Limitation on Serving Non-HTML Content</a></p>
</div>
<p>Go to the <mark>Page Rules</mark> menu and click on <mark>Create page rule</mark>
You can have 3 page rules per domain.</p>
<p>Add your domain with a wildcard at the end like so: <code>plex.domain.com/*</code> If you're using your root domain you do the same. <code>domain.com/*</code> or <code>domain.com/plex*</code></p>
<p>If you want to add the rule on all subdomains you can do that so: <code>*.domain.com/</code></p>
<p>Next select the <mark>Cache Level</mark> setting and set it to <mark>Bypass</mark>
Then click <mark>Save and Deploy</mark></p>
<p><div class="lightgallery"><a data-sub-html="Page Rules" href="../page_rules.png"><img alt="Page Rules" src="../page_rules.png" /></a></div></p>
<h4 id="disable-ipv6">Disable IPv6<a class="headerlink" href="#disable-ipv6" title="Permanent link">&para;</a></h4>
<p>There is currently a <a href="https://forums.plex.tv/t/plex-api-sessions-status-not-honoring-x-forwarded-for-x-real-ip-with-ipv6-clients/175705">bug</a> in Plex that it sees remote IPv6 adresses as local when reverse proxied. And as Cloudflare uses IPv6 we can disable that using the Cloudflare API. (It's not possible through the webUI)</p>
<p>This bug won't affect performance, but any remote streams using IPv6 will show as local on the Plex dashboard and in Tautili. So this is more of an annoyance that we can easily fix.</p>
<p>Below is the command you need to run for disabling IPv6.</p>
<div class="codehilite"><pre><span></span><code>    curl -X PATCH <span class="s2">&quot;https://api.cloudflare.com/client/v4/zones/xxxxxxxxxxxxxxxxx/settings/ipv6&quot;</span> <span class="se">\</span>
    -H <span class="s2">&quot;X-Auth-Email: xxxxxxx@email.com&quot;</span> <span class="se">\</span>
    -H <span class="s2">&quot;X-Auth-Key: xxxxxxxxxxxxxxxxxxxxx&quot;</span> <span class="se">\</span>
    -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
    --data <span class="s1">&#39;{&quot;value&quot;:&quot;off&quot;}&#39;</span>
</code></pre></div>


<p>In the API URL replace the x's with you Zone ID for you domain. You can find the zone ID on the <mark>Overview</mark> page at the bottom.</p>
<p><div class="lightgallery"><a data-sub-html="zone" href="../zone_id.png"><img alt="zone" src="../zone_id.png" /></a></div></p>
<p>On the second line add your email account you used for Cloudflare and on the third line add your <mark>Global API key</mark></p>
<p>The Global API key can be found on your profile page and then API Tokens.</p>
<p>Next just paste all the lines into the terminal and hit enter.</p>
<p>If successful, the output will look like this:</p>
<div class="codehilite"><pre><span></span><code>    <span class="p">{</span><span class="nt">&quot;result&quot;</span><span class="p">:{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;ipv6&quot;</span><span class="p">,</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;off&quot;</span><span class="p">,</span><span class="nt">&quot;modified_on&quot;</span><span class="p">:</span><span class="s2">&quot;2020-01-21T20:52:11.121560Z&quot;</span><span class="p">,</span><span class="nt">&quot;editable&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">},</span><span class="nt">&quot;success&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;errors&quot;</span><span class="p">:[],</span><span class="nt">&quot;messages&quot;</span><span class="p">:[]}</span>
</code></pre></div>


<p>In the webui it should now say that IPv6 Compatibility is off.
<div class="lightgallery"><a data-sub-html="ipv6" href="../ipv6.png"><img alt="ipv6" src="../ipv6.png" /></a></div></p>
<h3 id="plex">Plex<a class="headerlink" href="#plex" title="Permanent link">&para;</a></h3>
<h4 id="custom-server-access-urls">Custom server access URLs<a class="headerlink" href="#custom-server-access-urls" title="Permanent link">&para;</a></h4>
<p>After you've setup your reverse proxy for Plex and configured Cloudflare, go into your Plex settings and select <mark>Network</mark>.
Then click on <mark>Show Advanced</mark> and scroll down to <mark>Custom server access URLs</mark></p>
<p>Add your domain you setup for plex with the port 443 after like so: <code>https://plexdomain.com:443</code> or <code>https://plexdomain.com:443/plex</code>and hit save.</p>
<p><div class="lightgallery"><a data-sub-html="domain" href="../custom_url.png"><img alt="domain" src="../custom_url.png" /></a></div></p>
<p>At this point you do not need to have <mark>Remote Access</mark> enabled anymore.</p>
<p>To test you can disable your <mark>Remote Access</mark> and try and stream something remotely.</p>
<p>After a little while you should see on the Cloudflare <mark>Overview</mark> page that the <mark>Total Data Served</mark> have increased.</p>
<p><div class="lightgallery"><a data-sub-html="Overview" href="../cloudflare_overview.png"><img alt="Overview" src="../cloudflare_overview.png" /></a></div></p>
<p>Happy streaming <img alt="😄" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f604.svg" title=":smile:" /></p>
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      Last update: February 1, 2020
    
  </small>
</div>
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../../telegraf/ipmi/" title="Adding IPMI stats to the Telegraf container" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Adding IPMI stats to the Telegraf container
              </div>
            </div>
          </a>
        
        
          <a href="../../pfsense_vlan_vpn/pfsense_vlan_vpn/" title="Route a container trough a VPN with PfSense" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Route a container trough a VPN with PfSense
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/selfhosters" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://discord.gg/qWPbc8R" target="_blank" rel="noopener" title="discord.gg" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M297.216 243.2c0 15.616-11.52 28.416-26.112 28.416-14.336 0-26.112-12.8-26.112-28.416s11.52-28.416 26.112-28.416c14.592 0 26.112 12.8 26.112 28.416zm-119.552-28.416c-14.592 0-26.112 12.8-26.112 28.416s11.776 28.416 26.112 28.416c14.592 0 26.112-12.8 26.112-28.416.256-15.616-11.52-28.416-26.112-28.416zM448 52.736V512c-64.494-56.994-43.868-38.128-118.784-107.776l13.568 47.36H52.48C23.552 451.584 0 428.032 0 398.848V52.736C0 23.552 23.552 0 52.48 0h343.04C424.448 0 448 23.552 448 52.736zm-72.96 242.688c0-82.432-36.864-149.248-36.864-149.248-36.864-27.648-71.936-26.88-71.936-26.88l-3.584 4.096c43.52 13.312 63.744 32.512 63.744 32.512-60.811-33.329-132.244-33.335-191.232-7.424-9.472 4.352-15.104 7.424-15.104 7.424s21.248-20.224 67.328-33.536l-2.56-3.072s-35.072-.768-71.936 26.88c0 0-36.864 66.816-36.864 149.248 0 0 21.504 37.12 78.08 38.912 0 0 9.472-11.52 17.152-21.248-32.512-9.728-44.8-30.208-44.8-30.208 3.766 2.636 9.976 6.053 10.496 6.4 43.21 24.198 104.588 32.126 159.744 8.96 8.96-3.328 18.944-8.192 29.44-15.104 0 0-12.8 20.992-46.336 30.464 7.68 9.728 16.896 20.736 16.896 20.736 56.576-1.792 78.336-38.912 78.336-38.912z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
    
      <script src="../../../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../../../assets/javascripts/bundle.a45f732b.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: ["instant"],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.c03f0417.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
    <script>
    var elements = document.getElementsByClassName("lightgallery");
    for(var i=0; i<elements.length; i++) {
       lightGallery(elements[i]);
    }
    </script>

  </body>
</html>